<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Transaction (Tupl 1.2 API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Transaction (Tupl 1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Transaction.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/cojen/tupl/Snapshot.html" title="interface in org.cojen.tupl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/cojen/tupl/Transformer.html" title="class in org.cojen.tupl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/cojen/tupl/Transaction.html" target="_top">Frames</a></li>
<li><a href="Transaction.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.cojen.tupl</div>
<h2 title="Class Transaction" class="title">Class Transaction</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.cojen.tupl.Transaction</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Transaction</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Defines a logical unit of work. Transaction instances can only be safely
 used by one thread at a time, and they must be <a href="../../../org/cojen/tupl/Transaction.html#reset()"><code>reset</code></a> when no
 longer needed. Instances can be exchanged by threads, as long as a
 happens-before relationship is established. Without proper exclusion,
 multiple threads interacting with a Transaction instance may cause database
 corruption.

 <p>Transactions also contain various methods for directly controlling locks,
 although their use is not required. Methods which operate upon transactions
 acquire and release locks automatically. Direct control over locks is
 provided for advanced use cases. One such use is record filtering:

 <pre>
 Transaction txn = ...
 Cursor c = index.newCursor(txn);
 for (LockResult result = c.first(); c.key() != null; result = c.next()) {
     if (shouldDiscard(c.value()) &amp;&amp; result == LockResult.ACQUIRED) {
         // Unlock record which doesn't belong in the transaction.
         txn.unlock();
         continue;
     }
     ...
 }
 </pre>

 <p>Note: Transaction instances are never fully closed after they are reset
 or have fully exited. Any operation which acts upon a reset transaction can
 resurrect it.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Brian S O'Neill</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/cojen/tupl/Database.html#newTransaction()"><code>Database.newTransaction</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../org/cojen/tupl/Transaction.html" title="class in org.cojen.tupl">Transaction</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#BOGUS">BOGUS</a></strong></code>
<div class="block">Transaction instance which isn't a transaction at all.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#check()">check</a></strong>()</code>
<div class="block">Checks the validity of the transaction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#commit()">commit</a></strong>()</code>
<div class="block">Commits all modifications made within the current transaction scope.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#commitAll()">commitAll</a></strong>()</code>
<div class="block">Commits and exits all transaction scopes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#customRedo(byte[],%20long,%20byte[])">customRedo</a></strong>(byte[]&nbsp;message,
          long&nbsp;indexId,
          byte[]&nbsp;key)</code>
<div class="block">Supply a message for a custom redo handler.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#customUndo(byte[])">customUndo</a></strong>(byte[]&nbsp;message)</code>
<div class="block">Supply a message for a custom undo handler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/DurabilityMode.html" title="enum in org.cojen.tupl">DurabilityMode</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#durabilityMode()">durabilityMode</a></strong>()</code>
<div class="block">Returns the fixed durability mode of this transaction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#enter()">enter</a></strong>()</code>
<div class="block">Enters a nested transaction scope.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#exit()">exit</a></strong>()</code>
<div class="block">Exits the current transaction scope, rolling back all uncommitted
 modifications made within.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#hashCode()">hashCode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lastLockedIndex()">lastLockedIndex</a></strong>()</code>
<div class="block">Returns the index id of the last lock acquired, within the current scope.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lastLockedKey()">lastLockedKey</a></strong>()</code>
<div class="block">Returns the key of the last lock acquired, within the current scope.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockCheck(long,%20byte[])">lockCheck</a></strong>(long&nbsp;indexId,
         byte[]&nbsp;key)</code>
<div class="block">Checks the lock ownership for the given key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockExclusive(long,%20byte[])">lockExclusive</a></strong>(long&nbsp;indexId,
             byte[]&nbsp;key)</code>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockExclusive(long,%20byte[],%20long)">lockExclusive</a></strong>(long&nbsp;indexId,
             byte[]&nbsp;key,
             long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockMode()">lockMode</a></strong>()</code>
<div class="block">Returns the current lock mode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockMode(org.cojen.tupl.LockMode)">lockMode</a></strong>(<a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a>&nbsp;mode)</code>
<div class="block">Sets the lock mode for the current scope.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockShared(long,%20byte[])">lockShared</a></strong>(long&nbsp;indexId,
          byte[]&nbsp;key)</code>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockShared(long,%20byte[],%20long)">lockShared</a></strong>(long&nbsp;indexId,
          byte[]&nbsp;key,
          long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockTimeout(long,%20java.util.concurrent.TimeUnit)">lockTimeout</a></strong>(long&nbsp;timeout,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Sets the lock timeout for the current scope.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockTimeout(java.util.concurrent.TimeUnit)">lockTimeout</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Returns the current lock timeout, in the given unit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockUpgradable(long,%20byte[])">lockUpgradable</a></strong>(long&nbsp;indexId,
              byte[]&nbsp;key)</code>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#lockUpgradable(long,%20byte[],%20long)">lockUpgradable</a></strong>(long&nbsp;indexId,
              byte[]&nbsp;key,
              long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#reset()">reset</a></strong>()</code>
<div class="block">Exits all transaction scopes, rolling back all uncommitted
 modifications.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#tryLockExclusive(long,%20byte[],%20long)">tryLockExclusive</a></strong>(long&nbsp;indexId,
                byte[]&nbsp;key,
                long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#tryLockShared(long,%20byte[],%20long)">tryLockShared</a></strong>(long&nbsp;indexId,
             byte[]&nbsp;key,
             long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#tryLockUpgradable(long,%20byte[],%20long)">tryLockUpgradable</a></strong>(long&nbsp;indexId,
                 byte[]&nbsp;key,
                 long&nbsp;nanosTimeout)</code>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#unlock()">unlock</a></strong>()</code>
<div class="block">Fully releases last lock acquired, within the current scope.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#unlockToShared()">unlockToShared</a></strong>()</code>
<div class="block">Releases last lock acquired, within the current scope, retaining a
 shared lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/cojen/tupl/Transaction.html#unlockToUpgradable()">unlockToUpgradable</a></strong>()</code>
<div class="block">Releases last lock acquired or upgraded, within the current scope,
 retaining an upgradable lock.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BOGUS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BOGUS</h4>
<pre>public static final&nbsp;<a href="../../../org/cojen/tupl/Transaction.html" title="class in org.cojen.tupl">Transaction</a> BOGUS</pre>
<div class="block">Transaction instance which isn't a transaction at all. It always
 operates in an <a href="../../../org/cojen/tupl/LockMode.html#UNSAFE"><code>unsafe</code></a> lock mode and a <a href="../../../org/cojen/tupl/DurabilityMode.html#NO_REDO"><code>no-redo</code></a> durability mode. For safe auto-commit
 transactions, pass null for the transaction argument.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="lockMode(org.cojen.tupl.LockMode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockMode</h4>
<pre>public final&nbsp;void&nbsp;lockMode(<a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a>&nbsp;mode)</pre>
<div class="block">Sets the lock mode for the current scope. Transactions begin in <a href="../../../org/cojen/tupl/LockMode.html#UPGRADABLE_READ"><code>UPGRADABLE_READ</code></a> mode, and newly entered scopes
 begin at the outer scope's current mode. Exiting a scope reverts the
 lock mode.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>mode</code> - new lock mode</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if mode is null</dd></dl>
</li>
</ul>
<a name="lockMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockMode</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockMode.html" title="enum in org.cojen.tupl">LockMode</a>&nbsp;lockMode()</pre>
<div class="block">Returns the current lock mode.</div>
</li>
</ul>
<a name="lockTimeout(long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockTimeout</h4>
<pre>public final&nbsp;void&nbsp;lockTimeout(long&nbsp;timeout,
               <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Sets the lock timeout for the current scope. A negative timeout is
 infinite.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>unit</code> - required unit if timeout is more than zero</dd></dl>
</li>
</ul>
<a name="lockTimeout(java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockTimeout</h4>
<pre>public final&nbsp;long&nbsp;lockTimeout(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</pre>
<div class="block">Returns the current lock timeout, in the given unit.</div>
</li>
</ul>
<a name="durabilityMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>durabilityMode</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/DurabilityMode.html" title="enum in org.cojen.tupl">DurabilityMode</a>&nbsp;durabilityMode()</pre>
<div class="block">Returns the fixed durability mode of this transaction.</div>
</li>
</ul>
<a name="check()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>check</h4>
<pre>public final&nbsp;void&nbsp;check()
                 throws <a href="../../../org/cojen/tupl/DatabaseException.html" title="class in org.cojen.tupl">DatabaseException</a></pre>
<div class="block">Checks the validity of the transaction.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/DatabaseException.html" title="class in org.cojen.tupl">DatabaseException</a></code> - if transaction is bogus or was invalidated by
 an earlier exception</dd></dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public final&nbsp;void&nbsp;commit()
                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commits all modifications made within the current transaction scope. The
 current scope is still valid after this method is called, unless an
 exception is thrown. Call exit or reset to fully release transaction
 resources.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="commitAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitAll</h4>
<pre>public final&nbsp;void&nbsp;commitAll()
                     throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Commits and exits all transaction scopes.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="enter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enter</h4>
<pre>public final&nbsp;void&nbsp;enter()
                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Enters a nested transaction scope.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="exit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exit</h4>
<pre>public final&nbsp;void&nbsp;exit()
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Exits the current transaction scope, rolling back all uncommitted
 modifications made within. The transaction is still valid after this
 method is called, unless an exception is thrown.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="reset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public final&nbsp;void&nbsp;reset()
                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Exits all transaction scopes, rolling back all uncommitted
 modifications.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="lockShared(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockShared</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockShared(long&nbsp;indexId,
                    byte[]&nbsp;key)
                            throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction
 already owns a strong enough lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if too many shared locks</dd>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted or timed out</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="lockUpgradable(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockUpgradable</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockUpgradable(long&nbsp;indexId,
                        byte[]&nbsp;key)
                                throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction already owns a strong enough
 lock, and no extra unlock should be performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="lockExclusive(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockExclusive</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockExclusive(long&nbsp;indexId,
                       byte[]&nbsp;key)
                               throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>,
 transaction already owns exclusive lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#UPGRADED"><code>UPGRADED</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="customRedo(byte[], long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>customRedo</h4>
<pre>public final&nbsp;void&nbsp;customRedo(byte[]&nbsp;message,
              long&nbsp;indexId,
              byte[]&nbsp;key)
                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Supply a message for a custom redo handler. Redo operations must always be paired with
 undo operations.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - message to pass to redo handler</dd><dd><code>indexId</code> - index for lock acquisition; zero if not applicable</dd><dd><code>key</code> - key which has been locked exclusively; null if not applicable</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no redo handler is installed</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/cojen/tupl/ext/RedoHandler.html" title="interface in org.cojen.tupl.ext"><code>RedoHandler</code></a></dd></dl>
</li>
</ul>
<a name="customUndo(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>customUndo</h4>
<pre>public final&nbsp;void&nbsp;customUndo(byte[]&nbsp;message)
                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Supply a message for a custom undo handler. Undo operations must always be paired with
 redo operations.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - message to pass to undo handler</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no undo handler is installed</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/cojen/tupl/ext/UndoHandler.html" title="interface in org.cojen.tupl.ext"><code>UndoHandler</code></a></dd></dl>
</li>
</ul>
<a name="tryLockShared(long, byte[], long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockShared</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;tryLockShared(long&nbsp;indexId,
                       byte[]&nbsp;key,
                       long&nbsp;nanosTimeout)
                               throws <a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></pre>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction
 already owns a strong enough lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd><dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#INTERRUPTED"><code>INTERRUPTED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#TIMED_OUT_LOCK"><code>TIMED_OUT_LOCK</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if too many shared locks</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="lockShared(long, byte[], long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockShared</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockShared(long&nbsp;indexId,
                    byte[]&nbsp;key,
                    long&nbsp;nanosTimeout)
                            throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire a shared lock for the given key, denying exclusive
 locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction
 already owns a strong enough lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd><dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if too many shared locks</dd>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted or timed out</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="tryLockUpgradable(long, byte[], long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockUpgradable</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;tryLockUpgradable(long&nbsp;indexId,
                           byte[]&nbsp;key,
                           long&nbsp;nanosTimeout)
                                   throws <a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></pre>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction already owns a strong enough
 lock, and no extra unlock should be performed. If <a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a> is returned, transaction holds a shared
 lock, which cannot be upgraded.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd><dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#INTERRUPTED"><code>INTERRUPTED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#TIMED_OUT_LOCK"><code>TIMED_OUT_LOCK</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="lockUpgradable(long, byte[], long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockUpgradable</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockUpgradable(long&nbsp;indexId,
                        byte[]&nbsp;key,
                        long&nbsp;nanosTimeout)
                                throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an upgradable lock for the given key, denying
 exclusive and additional upgradable locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction already owns a strong enough
 lock, and no extra unlock should be performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd><dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="tryLockExclusive(long, byte[], long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLockExclusive</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;tryLockExclusive(long&nbsp;indexId,
                          byte[]&nbsp;key,
                          long&nbsp;nanosTimeout)
                                  throws <a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></pre>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>, transaction already owns exclusive lock, and no extra unlock
 should be performed. If <a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a> is returned,
 transaction holds a shared lock, which cannot be upgraded.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd><dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ILLEGAL"><code>ILLEGAL</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#INTERRUPTED"><code>INTERRUPTED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#TIMED_OUT_LOCK"><code>TIMED_OUT_LOCK</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#UPGRADED"><code>UPGRADED</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="lockExclusive(long, byte[], long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockExclusive</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockExclusive(long&nbsp;indexId,
                       byte[]&nbsp;key,
                       long&nbsp;nanosTimeout)
                               throws <a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></pre>
<div class="block">Attempts to acquire an exclusive lock for the given key, denying any
 additional locks. If return value is <a href="../../../org/cojen/tupl/LockResult.html#alreadyOwned()"><code>owned</code></a>,
 transaction already owns exclusive lock, and no extra unlock should be
 performed.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - non-null key to lock; instance is not cloned</dd><dd><code>nanosTimeout</code> - maximum time to wait for lock; negative timeout is infinite</dd>
<dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#ACQUIRED"><code>ACQUIRED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#UPGRADED"><code>UPGRADED</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/cojen/tupl/LockFailureException.html" title="class in org.cojen.tupl">LockFailureException</a></code> - if interrupted, timed out, or illegal upgrade</dd>
<dd><code><a href="../../../org/cojen/tupl/DeadlockException.html" title="class in org.cojen.tupl">DeadlockException</a></code> - if deadlock was detected after waiting full timeout</dd></dl>
</li>
</ul>
<a name="lockCheck(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockCheck</h4>
<pre>public final&nbsp;<a href="../../../org/cojen/tupl/LockResult.html" title="enum in org.cojen.tupl">LockResult</a>&nbsp;lockCheck(long&nbsp;indexId,
                   byte[]&nbsp;key)</pre>
<div class="block">Checks the lock ownership for the given key.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Returns:</span></dt><dd><a href="../../../org/cojen/tupl/LockResult.html#UNOWNED"><code>UNOWNED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_SHARED"><code>OWNED_SHARED</code></a>, <a href="../../../org/cojen/tupl/LockResult.html#OWNED_UPGRADABLE"><code>OWNED_UPGRADABLE</code></a>, or <a href="../../../org/cojen/tupl/LockResult.html#OWNED_EXCLUSIVE"><code>OWNED_EXCLUSIVE</code></a></dd></dl>
</li>
</ul>
<a name="lastLockedIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastLockedIndex</h4>
<pre>public final&nbsp;long&nbsp;lastLockedIndex()</pre>
<div class="block">Returns the index id of the last lock acquired, within the current scope.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>locked index id</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held</dd></dl>
</li>
</ul>
<a name="lastLockedKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastLockedKey</h4>
<pre>public final&nbsp;byte[]&nbsp;lastLockedKey()</pre>
<div class="block">Returns the key of the last lock acquired, within the current scope.

 <p><i>Note: This method is intended for advanced use cases.</i></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>locked key; instance is not cloned</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held</dd></dl>
</li>
</ul>
<a name="unlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>public final&nbsp;void&nbsp;unlock()</pre>
<div class="block">Fully releases last lock acquired, within the current scope. If the last
 lock operation was an upgrade, for a lock not immediately acquired,
 unlock is not allowed. Instead, an IllegalStateException is thrown.

 <p><i>Note: This method is intended for advanced use cases.</i> Also, the current
 implementation does not accurately track scopes. It may permit an unlock operation to
 cross a scope boundary, which has undefined behavior.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held, or if unlocking a
 non-immediate upgrade</dd></dl>
</li>
</ul>
<a name="unlockToShared()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockToShared</h4>
<pre>public final&nbsp;void&nbsp;unlockToShared()</pre>
<div class="block">Releases last lock acquired, within the current scope, retaining a
 shared lock. If the last lock operation was an upgrade, for a lock not
 immediately acquired, unlock is not allowed. Instead, an
 IllegalStateException is thrown.

 <p><i>Note: This method is intended for advanced use cases.</i> Also, the current
 implementation does not accurately track scopes. It may permit an unlock operation to
 cross a scope boundary, which has undefined behavior.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held, or if too many shared
 locks, or if unlocking a non-immediate upgrade</dd></dl>
</li>
</ul>
<a name="unlockToUpgradable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlockToUpgradable</h4>
<pre>public final&nbsp;void&nbsp;unlockToUpgradable()</pre>
<div class="block">Releases last lock acquired or upgraded, within the current scope,
 retaining an upgradable lock.

 <p><i>Note: This method is intended for advanced use cases.</i> Also, the current
 implementation does not accurately track scopes. It may permit an unlock operation to
 cross a scope boundary, which has undefined behavior.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if no locks held, or if last lock is shared</dd></dl>
</li>
</ul>
<a name="hashCode()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hashCode</h4>
<pre>public final&nbsp;int&nbsp;hashCode()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Transaction.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/cojen/tupl/Snapshot.html" title="interface in org.cojen.tupl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/cojen/tupl/Transformer.html" title="class in org.cojen.tupl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/cojen/tupl/Transaction.html" target="_top">Frames</a></li>
<li><a href="Transaction.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2011-2015 <a href="https://github.com/cojen">Cojen</a>. All Rights Reserved.</small></p>
</body>
</html>
